(this.webpackJsonpcountries=this.webpackJsonpcountries||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(6),a=n.n(o),i=(n(16),n(4)),u=n.n(i),s=n(7),l=n(2),j=(n(18),n(1)),d=function(e){return e},p={area:function(e){return e.toLocaleString()+" km\xb2"},capital:d,demonym:d,languages:function(e){return e.map((function(e){return e.name})).join(", ")},name:d,nativeName:d,population:function(e){return e.toLocaleString()},subregion:d},f={area:"Area",capital:"Capital",demonym:"Demonym",languages:"Languages",name:"Name",nativeName:"Native Name",population:"Population",subregion:"Sub-region"},b=function(e){var t=e.country;return console.log(t),window.country=t,t?Object.entries(t).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return n in p?Object(j.jsxs)("p",{children:[f[n],": ",p[n](r)]},n):null})):null},h=function(e){var t=e.options,n=e.filterValue;return Object(j.jsx)(j.Fragment,{children:(n?t.filter((function(e){return RegExp(n,"i").test(e)})):t).map((function(e){return Object(j.jsx)("option",{value:e,className:"country-dropdown-option",children:e},e)}))})},v=function(e){var t=e.options,n=e.selectedCountry,c=e.setSelectedCountry,o=Object(r.useState)(n),a=Object(l.a)(o,2),i=a[0],u=a[1],s=Object(r.useState)(!1),d=Object(l.a)(s,2),p=d[0],f=d[1],b=function(e){console.log("on option selection"),u(e),c(e),f(!1)};return Object(j.jsxs)("div",{className:"typeahead-container",children:[Object(j.jsx)("input",{tabIndex:"1",type:"text",id:"typeahead-input",className:"typeahead-input width-100",placeholder:"Choose a country",value:i,onChange:function(e){u(e.target.value)},onKeyDown:function(e){console.log("KeyDown: ",e.key),"Escape"===e.key&&f(!1)},onKeyPress:function(e){"Enter"===e.key&&b(i)},onFocus:function(){return f(!0)}}),p&&Object(j.jsx)("div",{className:"country-dropdown width-100",onClick:function(e){return b(e.target.innerText)},children:Object(j.jsx)(h,{options:t,filterValue:i})})]})},O=(n(20),function(){return Object(j.jsxs)("div",{className:"lds-ripple",children:[Object(j.jsx)("div",{}),Object(j.jsx)("div",{})]})}),m=n(5);var g=function(e){var t=Object(r.useState)(!1),n=Object(l.a)(t,2),c=n[0],o=n[1];return{isFetching:c,get:function(){var t=Object(s.a)(u.a.mark((function t(n){var r,c,a,i,s,l,j=arguments;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=j.length>1&&void 0!==j[1]?j[1]:"GET",c=j.length>2&&void 0!==j[2]?j[2]:{},a=j.length>3?j[3]:void 0,o(!0),i=e+n,t.prev=5,console.log("Fetching url: ",i),t.next=9,fetch(i,Object(m.a)({method:r,headers:c},a));case 9:return s=t.sent,t.next=12,s.json();case 12:if(l=t.sent,s.ok){t.next=15;break}throw new Error("Request received code: ".concat(s.status));case 15:return t.abrupt("return",l);case 18:throw t.prev=18,t.t0=t.catch(5),t.t0;case 21:return t.prev=21,o(!1),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[5,18,21,24]])})));return function(e){return t.apply(this,arguments)}}()}},x=n(23),y=n(24),w=n(25),N=function(e){var t=e.latitude,n=e.longitude,r=e.country,c=function(){var e=Object(x.a)(),c=o(r.area);return e.flyTo([t,n],c,{duration:2}),null},o=function(e){return e?e<1?12:e<1e3?10:e<5e4?8:e<1e5?7:e<1e6?6:e<=1e7?4:e>1e7?2:void 0:6};return Object(j.jsxs)(y.a,{center:[t,n],zoom:4,scrollWheelZoom:!0,children:[Object(j.jsx)(w.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(j.jsx)(c,{})]})};var S=function(){var e=Object(r.useState)({}),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(null),a=Object(l.a)(o,2),i=a[0],d=a[1],p=Object(r.useState)([]),f=Object(l.a)(p,2),h=f[0],m=f[1],x=g("".concat("https://restcountries.eu/rest/v2")),y=x.isFetching,w=x.get,S=function(e){return d(e.toLowerCase())};Object(r.useEffect)((function(){k().then((function(e){window.countries=e,C(e)}))}),[]);var k=function(){var e=Object(s.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/all");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(e){var t={},n=[];e.forEach((function(e){t[e.name.toLowerCase()]=e,n.push(e.name)})),c(t),m(n),function(e){var t=e.length,n=e[Math.round(Math.random()*t)];S(n.name)}(e)},E=n[i]||{},F=null;return E&&(F=E.latlng),Object(j.jsxs)("div",{className:"App",children:[y&&Object(j.jsx)(O,{}),!y&&Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"flex-container",children:[Object(j.jsx)("div",{className:"column flag-display",children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("img",{id:"flag",width:"250",src:null===E||void 0===E?void 0:E.flag}),Object(j.jsx)(b,{country:E})]})}),F&&Object(j.jsx)(N,{country:E,latitude:F[0],longitude:F[1]}),Object(j.jsx)("div",{className:"column country-list",children:Object(j.jsx)(v,{options:h,selectedCountry:i,setSelectedCountry:S})})]})})]})};a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(S,{})}),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.eb55fdbc.chunk.js.map